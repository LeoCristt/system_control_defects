"use client";

import { useState } from 'react';
import { useRouter } from 'next/navigation';
import { useAuth } from '@/contexts/AuthContext';
import logo from '@/public/svg-gobbler.png'

export default function LoginPage() {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [error, setError] = useState('');
  const [isLoading, setIsLoading] = useState(false);
  const { login } = useAuth();
  const router = useRouter();

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setError('');
    setIsLoading(true);

    const success = await login(email, password);

    if (success) {
      router.push('/dashboard');
    } else {
      setError('Неверный email или пароль');
    }

    setIsLoading(false);
  };

  const quickLogin = (userEmail: string) => {
    setEmail(userEmail);
    setPassword('password');
  };

  return (
    <div className="min-h-screen flex items-center justify-center px-4 bg-white">
      <div className="max-w-md w-full">
        <div className="bg-white p-8">
          <div className="text-center mb-8">
            <div className="w-32 h-32 flex items-center justify-center mx-auto mb-4">
              <svg width="168" height="157" viewBox="0 0 168 157" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M41.1886 25.0374C40.9524 25.2581 40.765 25.52 40.6372 25.8084C40.5094 26.0967 40.4436 26.4057 40.4436 26.7178V37.4713L55.2444 48.626L71.504 38.5139L68.1131 0.860033C67.7791 0.859608 67.4482 0.920898 67.1396 1.04038C66.831 1.15986 66.5508 1.33517 66.3149 1.55623L41.1886 25.0374Z" fill="#DCE1FF" />
                <path d="M69.9113 1.55623C69.6754 1.33522 69.3951 1.15995 69.0865 1.04047C68.7779 0.920998 68.4471 0.859677 68.1131 0.860033V41.6831L85.8616 51.1738L102.738 32.2335L69.9113 1.55623Z" fill="#A5B1FF" />
                <path d="M102.738 32.2335L85.8616 48.0049L106.298 58.933V35.5608L102.738 32.2335Z" fill="#A5B1FF" />
                <path d="M55.2447 45.4575L40.4436 37.4716V111.159L55.2447 119.145H65.4173L55.2447 45.4575Z" fill="#A6B2FF" />
                <path d="M55.2447 45.4575V79.546L90.4111 105.383L85.6436 48.2083L85.8616 48.0049L68.1131 38.5142L55.2447 45.4575Z" fill="#C9D1FF" />
                <path d="M85.6436 48.2084V92.0538L64.591 72.3797C64.4808 72.2767 64.3499 72.195 64.206 72.1392C64.062 72.0835 63.9076 72.0548 63.7518 72.0548C63.5959 72.0548 63.4416 72.0835 63.2976 72.1392C63.1536 72.195 63.0227 72.2767 62.9125 72.3797L55.2444 79.5457V119.144L80.2178 132.619L106.298 118.547V58.933L85.8612 48.0049L85.6436 48.2084Z" fill="#7A87DE" />
                <path d="M135.645 66.6174L127.695 34.5778L119.321 26.7517C119.085 26.531 118.804 26.3559 118.496 26.2365C118.187 26.1171 117.857 26.0556 117.523 26.0556C117.189 26.0556 116.858 26.1171 116.549 26.2365C116.241 26.3559 115.96 26.531 115.724 26.7517L90.3908 50.4265V59.9331L108.802 72.9469L135.645 66.6174Z" fill="#DCE1FF" />
                <path d="M140.731 66.6175L135.645 42.0069L127.695 34.5779V66.6175H140.731Z" fill="#A5B1FF" />
                <path d="M140.731 66.6174V47.7444C140.731 47.1141 140.463 46.5095 139.986 46.064L135.645 42.0069V66.6174H140.731Z" fill="#A5B1FF" />
                <path d="M108.802 69.7781L90.3908 59.9331V121.743L100.944 129.875L111.286 133.018L108.802 69.7781Z" fill="#A6B2FF" />
                <path d="M108.802 136.696L111.286 133.018L90.3904 121.743V127.13L107.53 136.378C107.916 136.586 108.355 136.696 108.802 136.696Z" fill="#A5B1FF" />
                <path d="M108.802 69.7781V131.677L127.846 123.316V104.118L138.019 85.2354L135.645 63.8732L127.695 59.5839L108.802 69.7781Z" fill="#8898FF" />
                <path d="M75.1319 114.172L80.2182 93.6385L55.2447 70.3003L31.016 92.9423C30.7798 93.163 30.5924 93.425 30.4646 93.7133C30.3368 94.0017 30.271 94.3107 30.271 94.6228V102.227L36.7506 114.172H75.1319Z" fill="#DCE1FF" />
                <path d="M47.2857 111.407L30.271 102.227V133.017L47.2857 147.585L52.0207 128.145L47.2857 111.407Z" fill="#A6B2FF" />
                <path d="M30.271 133.018V137.032C30.271 137.45 30.3885 137.859 30.6117 138.221C30.8349 138.582 31.156 138.882 31.5426 139.091L47.2857 147.585L48.4454 142.824L30.271 133.018Z" fill="#A5B1FF" />
                <path d="M47.2857 142.198L65.4174 154.63L78.7845 147.585L75.1319 96.3828L47.2857 111.407V142.198Z" fill="#8898FF" />
                <path d="M75.1319 96.3828V146.099C75.1319 146.294 75.077 146.485 74.9728 146.653C74.8687 146.822 74.7189 146.962 74.5385 147.059L66.0108 151.66C65.8303 151.758 65.6257 151.809 65.4174 151.809C65.209 151.809 65.0044 151.758 64.8239 151.66L47.2857 142.198V147.585L64.1458 156.682C64.5324 156.89 64.9709 157 65.4174 157C65.8638 157 66.3023 156.89 66.6889 156.682L78.9466 150.068C79.3331 149.859 79.6541 149.559 79.8773 149.198C80.1005 148.837 80.2181 148.427 80.2182 148.01V93.6385L75.1319 96.3828Z" fill="#6B7AD9" />
                <path d="M140.73 0.535156C140.772 0.577793 140.83 0.647586 140.897 0.759766C141.059 1.03218 141.23 1.44997 141.406 1.99512C141.756 3.07933 142.088 4.55047 142.414 6.08496C142.737 7.60705 143.053 9.19136 143.366 10.4609C143.522 11.096 143.681 11.6676 143.844 12.123C143.926 12.3509 144.013 12.5596 144.104 12.7363C144.193 12.9068 144.302 13.0791 144.441 13.209C144.67 13.423 145.019 13.5968 145.386 13.7451C145.769 13.8996 146.232 14.0504 146.737 14.1982C147.744 14.4931 148.975 14.7931 150.136 15.0967C151.312 15.4041 152.418 15.7146 153.226 16.0391C153.633 16.2022 153.933 16.3575 154.124 16.499C154.227 16.5754 154.271 16.6283 154.29 16.6553C154.271 16.6823 154.227 16.7353 154.124 16.8115C153.933 16.953 153.632 17.1074 153.226 17.2705C152.418 17.595 151.312 17.9065 150.136 18.2139C148.975 18.5175 147.744 18.8175 146.737 19.1123C146.232 19.2602 145.769 19.411 145.386 19.5654C145.019 19.7138 144.67 19.8875 144.441 20.1016C144.302 20.2315 144.193 20.4037 144.104 20.5742C144.013 20.7509 143.926 20.9589 143.844 21.1865C143.681 21.6421 143.521 22.2143 143.365 22.8496C143.052 24.1192 142.737 25.7036 142.414 27.2256C142.088 28.76 141.756 30.2312 141.406 31.3154C141.23 31.8607 141.058 32.2784 140.896 32.5508C140.83 32.6624 140.772 32.7318 140.73 32.7744C140.689 32.7316 140.631 32.6619 140.565 32.5508C140.403 32.2784 140.231 31.8608 140.055 31.3154C139.706 30.2312 139.373 28.7601 139.048 27.2256C138.725 25.7035 138.409 24.1192 138.096 22.8496C137.94 22.2143 137.78 21.6421 137.617 21.1865C137.535 20.9589 137.45 20.7508 137.358 20.5742C137.27 20.4037 137.16 20.2315 137.021 20.1016C136.792 19.8875 136.443 19.7138 136.076 19.5654C135.694 19.4109 135.23 19.2602 134.724 19.1123C133.717 18.8175 132.487 18.5174 131.326 18.2139C130.15 17.9065 129.044 17.595 128.236 17.2705C127.83 17.1073 127.529 16.9531 127.338 16.8115C127.235 16.735 127.19 16.6823 127.172 16.6553C127.19 16.6283 127.234 16.5756 127.338 16.499C127.529 16.3574 127.83 16.2023 128.236 16.0391C129.044 15.7146 130.15 15.4031 131.326 15.0957C132.487 14.7922 133.717 14.492 134.724 14.1973C135.23 14.0494 135.694 13.8996 136.076 13.7451C136.443 13.5967 136.792 13.4231 137.021 13.209C137.16 13.0791 137.27 12.9069 137.358 12.7363C137.45 12.5596 137.535 12.3509 137.617 12.123C137.78 11.6675 137.94 11.0962 138.096 10.4609C138.409 9.19135 138.725 7.60706 139.048 6.08496C139.373 4.55043 139.706 3.07937 140.055 1.99512C140.231 1.4498 140.403 1.03221 140.565 0.759766C140.632 0.648288 140.688 0.577884 140.73 0.535156Z" fill="white" stroke="black" />
                <path d="M124.306 145.55C125.56 145.55 126.519 146.492 126.519 147.585C126.519 148.677 125.56 149.62 124.306 149.62C123.051 149.62 122.093 148.677 122.093 147.585C122.093 146.492 123.051 145.55 124.306 145.55Z" fill="white" stroke="black" />
                <path d="M25.8644 81.9527C27.1188 81.9528 28.0773 82.8954 28.0773 83.9879C28.0772 85.0804 27.1187 86.0229 25.8644 86.023C24.61 86.023 23.6515 85.0804 23.6515 83.9879C23.6515 82.8953 24.6099 81.9527 25.8644 81.9527Z" fill="white" stroke="black" />
                <path d="M19.8407 59.2812C21.0018 59.2812 21.8837 60.1531 21.8837 61.1582V66.4111H25.8642C27.0252 66.4111 27.9071 67.283 27.9071 68.288C27.907 69.293 27.0251 70.164 25.8642 70.164H21.8837V75.4179C21.8836 75.6594 21.8331 75.8998 21.7333 76.125C21.6334 76.3501 21.4859 76.5575 21.2977 76.7334C21.1095 76.9092 20.8839 77.0505 20.6337 77.1474C20.3833 77.2443 20.1135 77.2939 19.8407 77.2939C19.2884 77.2938 18.7646 77.0893 18.3837 76.7334C18.0039 76.3785 17.7978 75.9042 17.7977 75.4179V70.164H13.8173C12.6564 70.1639 11.7745 69.2929 11.7743 68.288C11.7743 67.283 12.6563 66.4112 13.8173 66.4111H17.7977V61.1582C17.7977 60.1532 18.6798 59.2813 19.8407 59.2812Z" fill="white" stroke="black" />
                <path d="M154.013 35.4366C155.268 35.4367 156.226 36.3792 156.226 37.4717C156.226 38.5642 155.268 39.5068 154.013 39.5069C152.759 39.5069 151.8 38.5643 151.8 37.4717C151.8 36.3791 152.759 35.4366 154.013 35.4366Z" fill="white" stroke="black" />
                <path d="M25.1843 39.4962C27.7496 39.4962 29.771 41.4316 29.7712 43.7491C29.7712 46.0668 27.7497 48.003 25.1843 48.003C22.6191 48.0028 20.5984 46.0667 20.5984 43.7491C20.5986 41.4317 22.6192 39.4964 25.1843 39.4962Z" fill="white" stroke="black" />
                <path d="M135.644 134.698C138.21 134.698 140.231 136.633 140.231 138.951C140.231 141.268 138.21 143.205 135.644 143.205C133.079 143.205 131.058 141.268 131.058 138.951C131.059 136.633 133.079 134.698 135.644 134.698Z" fill="white" stroke="black" />
                <path d="M135.645 63.8732V84.3383C135.645 84.5116 135.602 84.6824 135.518 84.8371L125.599 103.249C125.516 103.404 125.472 103.575 125.472 103.748V122.042C125.472 122.237 125.418 122.428 125.313 122.597C125.209 122.765 125.059 122.905 124.879 123.003L108.802 131.677V136.697C109.241 136.697 109.68 136.59 110.073 136.378L129.287 126.011C129.674 125.803 129.995 125.503 130.218 125.141C130.441 124.78 130.559 124.37 130.559 123.953V104.435L140.46 86.0568C140.638 85.7252 140.731 85.3591 140.731 84.9879V66.6175L135.645 63.8732Z" fill="#6B7AD9" />
              </svg>

            </div>
            <h2 className="text-2xl font-bold text-gray-900 mb-2">Crist <span className='text-[#5E62DB]'>Control</span></h2>
          </div>

          <form onSubmit={handleSubmit} className="space-y-6">
            <div>
              <label htmlFor="email" className="block text-sm font-medium text-gray-700 mb-2">
                Email
              </label>
              <input
                id="email"
                type="email"
                value={email}
                onChange={(e) => setEmail(e.target.value)}
                required
                className="w-full px-4 py-3 border border-gray-300 rounded-lg text-black focus:ring-2 focus:ring-[] transition-all duration-200"
                placeholder="Введите ваш email"
              />
            </div>

            <div>
              <label htmlFor="password" className="block text-sm font-medium text-gray-700 mb-2">
                Пароль
              </label>
              <input
                id="password"
                type="password"
                value={password}
                onChange={(e) => setPassword(e.target.value)}
                required
                className="w-full px-4 py-3 border border-gray-300 rounded-lg text-black focus:ring-2 focus:ring-[#5E62DB] focus:border-transparent transition-all duration-200"
                placeholder="Введите пароль"
              />
            </div>
            <div className='flex justify-end text-[#5E62DB]'>
              <a href="">Забыли пароль?</a>
            </div>

            {error && (
              <div className="bg-red-50 border border-red-200 rounded-lg p-3">
                <p className="text-red-600 text-sm">{error}</p>
              </div>
            )}

            <button
              type="submit"
              disabled={isLoading}
              className="w-full bg-[#5E62DB] text-white py-3 px-4 rounded-lg font-medium hover:bg-[#5e62dbe9] focus:ring-2 focus:ring-[#5E62DB] focus:ring-offset-2 transition-all duration-200 disabled:opacity-50"
            >
              {isLoading ? 'Вход...' : 'Войти'}
            </button>
          </form>

          {/* <div className="mt-8 pt-6 border-t border-gray-200">
            <p className="text-sm text-gray-600 mb-4 text-center">Быстрый вход (демо):</p>
            <div className="space-y-2">
              <button
                onClick={() => quickLogin('engineer@test.com')}
                className="w-full text-left px-4 py-2 bg-green-50 border border-green-200 rounded-lg hover:bg-green-100 transition-colors"
              >
                <span className="font-medium text-green-800">Инженер</span>
                <span className="text-green-600 text-sm block">engineer@test.com</span>
              </button>
              <button
                onClick={() => quickLogin('manager@test.com')}
                className="w-full text-left px-4 py-2 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors"
              >
                <span className="font-medium text-blue-800">Менеджер</span>
                <span className="text-blue-600 text-sm block">manager@test.com</span>
              </button>
              <button
                onClick={() => quickLogin('supervisor@test.com')}
                className="w-full text-left px-4 py-2 bg-purple-50 border border-purple-200 rounded-lg hover:bg-purple-100 transition-colors"
              >
                <span className="font-medium text-purple-800">Руководитель</span>
                <span className="text-purple-600 text-sm block">supervisor@test.com</span>
              </button>
            </div>
          </div> */}
        </div>
      </div>
    </div>
  );
}